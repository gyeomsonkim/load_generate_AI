{
  "info": {
    "name": "Pathfinding Server API",
    "description": "AI 기반 길찾기 서버 API 컬렉션\n\n## 기능\n- 지도 이미지 업로드 및 전처리\n- 보행 가능 영역 자동 감지\n- 장애물 검출\n- 지도 목록 관리\n\n## 사용 방법\n1. 환경 변수 설정 (Variables 탭)\n2. Health Check로 서버 상태 확인\n3. 지도 업로드 후 map_id 저장\n4. 업로드한 지도 조회 및 관리",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "pathfinding-server-v1"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "key": "api_prefix",
      "value": "/api/v1",
      "type": "string"
    },
    {
      "key": "map_id",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health & Info",
      "item": [
        {
          "name": "Root - 서버 정보",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/",
              "host": ["{{base_url}}"],
              "path": [""]
            },
            "description": "서버 기본 정보 및 API 문서 링크 조회"
          },
          "response": []
        },
        {
          "name": "Health Check - 서버 상태 확인",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}{{api_prefix}}/health",
              "host": ["{{base_url}}"],
              "path": ["{{api_prefix}}", "health"]
            },
            "description": "서버 상태, 데이터베이스 연결, 스토리지 상태 확인"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Server is healthy\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.eql(\"healthy\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ],
      "description": "서버 상태 및 기본 정보 확인"
    },
    {
      "name": "Maps Management",
      "item": [
        {
          "name": "Upload Map - 지도 업로드",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": [],
                  "description": "지도 이미지 파일 (JPG, PNG 등)"
                },
                {
                  "key": "name",
                  "value": "Test Park Map",
                  "type": "text",
                  "description": "지도 이름 (필수)"
                },
                {
                  "key": "description",
                  "value": "테스트용 공원 지도입니다",
                  "type": "text",
                  "description": "지도 설명 (선택)"
                },
                {
                  "key": "map_type",
                  "value": "park",
                  "type": "text",
                  "description": "지도 유형: park, school, campus, building, mall, hospital, airport, other"
                },
                {
                  "key": "scale_meters_per_pixel",
                  "value": "0.5",
                  "type": "text",
                  "description": "1픽셀당 실제 거리(미터)"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}{{api_prefix}}/maps/upload",
              "host": ["{{base_url}}"],
              "path": ["{{api_prefix}}", "maps", "upload"]
            },
            "description": "지도 이미지를 업로드하고 자동으로 전처리를 시작합니다.\n\n**입력:**\n- file: 이미지 파일 (필수)\n- name: 지도 이름 (필수)\n- description: 설명 (선택)\n- map_type: 지도 유형 (기본: other)\n- scale_meters_per_pixel: 스케일 (기본: 1.0)\n\n**출력:**\n- map_id: 생성된 지도 ID\n- preprocessing_status: 전처리 상태 (uploaded → processing → processed)"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has map_id\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.id).to.be.a('string');",
                  "    pm.environment.set(\"map_id\", jsonData.id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "List Maps - 지도 목록 조회",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}{{api_prefix}}/maps/?skip=0&limit=10",
              "host": ["{{base_url}}"],
              "path": ["{{api_prefix}}", "maps", ""],
              "query": [
                {
                  "key": "skip",
                  "value": "0",
                  "description": "건너뛸 항목 수 (페이지네이션)"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "가져올 최대 항목 수"
                }
              ]
            },
            "description": "업로드된 모든 지도 목록을 조회합니다.\n\n**쿼리 파라미터:**\n- skip: 건너뛸 항목 수 (기본: 0)\n- limit: 가져올 최대 항목 수 (기본: 10)\n\n**출력:**\n- 지도 목록 배열 (최신순 정렬)"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get Map - 특정 지도 조회",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}{{api_prefix}}/maps/{{map_id}}",
              "host": ["{{base_url}}"],
              "path": ["{{api_prefix}}", "maps", "{{map_id}}"]
            },
            "description": "특정 지도의 상세 정보를 조회합니다.\n\n**경로 파라미터:**\n- map_id: 조회할 지도 ID\n\n**출력:**\n- 지도 상세 정보\n- 전처리 상태\n- 이미지 URL\n- 메타데이터\n\n**참고:** 먼저 'Upload Map'으로 지도를 업로드한 후 생성된 map_id를 환경 변수에 설정하세요."
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has required fields\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData).to.have.property('name');",
                  "    pm.expect(jsonData).to.have.property('preprocessing_status');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Preprocess Map - 지도 전처리 (수동)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"force_reprocess\": false,\n  \"algorithm\": \"auto\",\n  \"options\": {}\n}"
            },
            "url": {
              "raw": "{{base_url}}{{api_prefix}}/maps/{{map_id}}/preprocess",
              "host": ["{{base_url}}"],
              "path": ["{{api_prefix}}", "maps", "{{map_id}}", "preprocess"]
            },
            "description": "특정 지도의 전처리를 수동으로 실행합니다.\n\n**경로 파라미터:**\n- map_id: 전처리할 지도 ID\n\n**요청 본문:**\n- force_reprocess: 재처리 여부 (기본: false)\n- algorithm: 알고리즘 선택 (기본: auto)\n- options: 추가 옵션\n\n**출력:**\n- 전처리 결과\n- 처리 시간\n- 보행 가능 영역 비율\n- 검출된 장애물 수\n- 검출된 입구 수\n\n**참고:** 업로드 시 자동으로 백그라운드 전처리가 시작되므로, 이 API는 재처리가 필요할 때만 사용하세요."
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Preprocessing completed\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.be.oneOf(['completed', 'already_processed']);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ],
      "description": "지도 업로드, 조회, 관리 API"
    },
    {
      "name": "Examples & Test Scenarios",
      "item": [
        {
          "name": "Scenario 1: 새 지도 업로드 및 상태 확인",
          "item": [
            {
              "name": "Step 1: Upload New Map",
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "formdata",
                  "formdata": [
                    {
                      "key": "file",
                      "type": "file",
                      "src": []
                    },
                    {
                      "key": "name",
                      "value": "Seoul Park Map",
                      "type": "text"
                    },
                    {
                      "key": "description",
                      "value": "서울 공원 지도",
                      "type": "text"
                    },
                    {
                      "key": "map_type",
                      "value": "park",
                      "type": "text"
                    },
                    {
                      "key": "scale_meters_per_pixel",
                      "value": "0.3",
                      "type": "text"
                    }
                  ]
                },
                "url": {
                  "raw": "{{base_url}}{{api_prefix}}/maps/upload",
                  "host": ["{{base_url}}"],
                  "path": ["{{api_prefix}}", "maps", "upload"]
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "var jsonData = pm.response.json();",
                      "pm.environment.set(\"map_id\", jsonData.id);",
                      "console.log(\"Map ID saved: \" + jsonData.id);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            },
            {
              "name": "Step 2: Check Map Status",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}{{api_prefix}}/maps/{{map_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["{{api_prefix}}", "maps", "{{map_id}}"]
                }
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "var jsonData = pm.response.json();",
                      "console.log(\"Preprocessing Status: \" + jsonData.preprocessing_status);"
                    ],
                    "type": "text/javascript"
                  }
                }
              ]
            }
          ],
          "description": "지도 업로드 후 상태 확인 시나리오"
        },
        {
          "name": "Scenario 2: 학교 지도 업로드",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": []
                },
                {
                  "key": "name",
                  "value": "ABC High School Campus",
                  "type": "text"
                },
                {
                  "key": "description",
                  "value": "ABC 고등학교 캠퍼스 지도",
                  "type": "text"
                },
                {
                  "key": "map_type",
                  "value": "school",
                  "type": "text"
                },
                {
                  "key": "scale_meters_per_pixel",
                  "value": "0.2",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}{{api_prefix}}/maps/upload",
              "host": ["{{base_url}}"],
              "path": ["{{api_prefix}}", "maps", "upload"]
            }
          },
          "response": []
        },
        {
          "name": "Scenario 3: 쇼핑몰 지도 업로드",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": []
                },
                {
                  "key": "name",
                  "value": "Mega Mall Floor 1",
                  "type": "text"
                },
                {
                  "key": "description",
                  "value": "메가몰 1층 실내 지도",
                  "type": "text"
                },
                {
                  "key": "map_type",
                  "value": "mall",
                  "type": "text"
                },
                {
                  "key": "scale_meters_per_pixel",
                  "value": "0.1",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}{{api_prefix}}/maps/upload",
              "host": ["{{base_url}}"],
              "path": ["{{api_prefix}}", "maps", "upload"]
            }
          },
          "response": []
        }
      ],
      "description": "실제 사용 시나리오 예시"
    }
  ]
}